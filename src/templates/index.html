<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>People Count | KDS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  </head>
  <body>
  <section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-narrow">
              <div class="box" style="width: 700px;">
                <p class="title is-5">Narrow column</p>
                <p class="subtitle">This column is only 200px wide.</p>
              </div>
            </div>
            <div class="column">
                <div class="box">
                    <p class="title is-5">Flexible column</p>
                    <hr>
                    <img id="frame" src="">
                    <div id="textArea"></div>
                    <script>
                        let ws = new WebSocket("ws://localhost:8000/get-stream");
                        let image = document.getElementById("frame");
                        image.onload = function(){
                            URL.revokeObjectURL(this.src); // release the blob URL once the image is loaded
                        } 
                        ws.onmessage = function(event) {
                            if (typeof event.data === 'string') 
                                document.getElementById("textArea").innerHTML = event.data;
                            else
                                image.src = URL.createObjectURL(event.data);
                        };
                    </script>
                </div>
            </div>
          </div>
    </div>
  </section>
  </body>
</html>